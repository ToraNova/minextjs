{"ast":null,"code":"var _jsxFileName = \"/home/cjason/prodev/minextjs/pages/logout.js\";\nvar __jsx = React.createElement;\n\n/*\n * Login page\n * used for logging in\n * please refer to https://github.com/zeit/next.js/issues/153\n *\n */\n//react components\nimport React, { Component } from 'react';\nimport Router from 'next/router'; //custom service\n\nimport AuthService from '../utils/authser.js';\nimport Layout from '../layouts/minimalist/border1.js'; //configure AuthService onto localhost:1996\n\nconst auth = new AuthService('http://localhost:1996');\n\nclass Logout extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    //logout the user\n    try {\n      auth.logout(); //wait for logout\n\n      console.log(\"Logged out\");\n      Router.push('/login');\n    } catch (e) {\n      //error occurred\n      //TODO: unify a error handling format\n      switch (e.response.status) {\n        case 401:\n        case 400:\n          //user not logged in.\n          //redirect back to login for now\n          Router.push('/login');\n          break;\n\n        case 500:\n          //back-end error, logout user from device anyways\n          localStorage.removeItem('token');\n          localStorage.removeItem('profile');\n          Router.push('/login');\n          break;\n\n        default:\n          //unknown error do not logout first\n          //TODO: figure out what do properly do here\n          Router.push('/');\n      }\n    }\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, \"REDIRECTING....\"));\n  }\n\n}\n\nexport default Logout;","map":{"version":3,"sources":["/home/cjason/prodev/minextjs/pages/logout.js"],"names":["React","Component","Router","AuthService","Layout","auth","Logout","constructor","props","componentDidMount","logout","console","log","push","e","response","status","localStorage","removeItem","render"],"mappings":";;;AAAA;;;;;;AAOA;AACA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,aAAnB,C,CAEA;;AACA,OAAOC,WAAP,MAAwB,qBAAxB;AAEA,OAAOC,MAAP,MAAmB,kCAAnB,C,CAEA;;AACA,MAAMC,IAAI,GAAG,IAAIF,WAAJ,CAAgB,uBAAhB,CAAb;;AAEA,MAAMG,MAAN,SAAqBL,SAArB,CAA+B;AAC9BM,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;AACA;;AAEDC,EAAAA,iBAAiB,GAAI;AACpB;AACA,QAAG;AACFJ,MAAAA,IAAI,CAACK,MAAL,GADE,CACY;;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACAV,MAAAA,MAAM,CAACW,IAAP,CAAY,QAAZ;AACA,KAJD,CAIE,OAAOC,CAAP,EAAU;AACX;AACA;AACA,cAAQA,CAAC,CAACC,QAAF,CAAWC,MAAnB;AACC,aAAK,GAAL;AAAU,aAAK,GAAL;AACT;AACA;AACAd,UAAAA,MAAM,CAACW,IAAP,CAAY,QAAZ;AACA;;AACD,aAAK,GAAL;AACC;AACAI,UAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAD,UAAAA,YAAY,CAACC,UAAb,CAAwB,SAAxB;AACAhB,UAAAA,MAAM,CAACW,IAAP,CAAY,QAAZ;AACA;;AACD;AACC;AACA;AACAX,UAAAA,MAAM,CAACW,IAAP,CAAY,GAAZ;AAfF;AAiBA;AACD;;AAEDM,EAAAA,MAAM,GAAG;AACR,WACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADA,CADA;AAKA;;AAxC6B;;AA2C/B,eAAeb,MAAf","sourcesContent":["/*\n * Login page\n * used for logging in\n * please refer to https://github.com/zeit/next.js/issues/153\n *\n */\n\n//react components\nimport React, {Component} from 'react'\nimport Router from 'next/router'\n\n//custom service\nimport AuthService from '../utils/authser.js'\n\nimport Layout from '../layouts/minimalist/border1.js'\n\n//configure AuthService onto localhost:1996\nconst auth = new AuthService('http://localhost:1996')\n\nclass Logout extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t}\n\n\tcomponentDidMount () {\n\t\t//logout the user\n\t\ttry{\n\t\t\tauth.logout() //wait for logout\n\t\t\tconsole.log(\"Logged out\")\n\t\t\tRouter.push('/login')\n\t\t} catch (e) {\n\t\t\t//error occurred\n\t\t\t//TODO: unify a error handling format\n\t\t\tswitch( e.response.status ){\n\t\t\t\tcase 401: case 400:\n\t\t\t\t\t//user not logged in.\n\t\t\t\t\t//redirect back to login for now\n\t\t\t\t\tRouter.push('/login')\n\t\t\t\t\tbreak;\n\t\t\t\tcase 500:\n\t\t\t\t\t//back-end error, logout user from device anyways\n\t\t\t\t\tlocalStorage.removeItem('token');\n\t\t\t\t\tlocalStorage.removeItem('profile');\n\t\t\t\t\tRouter.push('/login')\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t//unknown error do not logout first\n\t\t\t\t\t//TODO: figure out what do properly do here\n\t\t\t\t\tRouter.push('/')\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t<div>\n\t\t<div>REDIRECTING....</div>\n\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Logout\n"]},"metadata":{},"sourceType":"module"}