{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/cjason/prodev/minextjs/pages/logout.js\";\nvar __jsx = React.createElement;\n\n/*\n * Login page\n * used for logging in\n * please refer to https://github.com/zeit/next.js/issues/153\n *\n */\n//react components\nimport React, { Component } from 'react';\nimport Router from 'next/router'; //custom service\n\nimport AuthService from '../utils/authser.js';\nimport Layout from '../layouts/minimalist/border1.js'; //configure AuthService onto localhost:1996\n\nvar auth = new AuthService('http://localhost:1996');\n\nvar Logout =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Logout, _Component);\n\n  function Logout(props) {\n    _classCallCheck(this, Logout);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Logout).call(this, props));\n  }\n\n  _createClass(Logout, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //logout the user\n      auth.logout().then(function (res) {\n        console.log(res); //redirect to index page\n\n        Router.push('/');\n      })[\"catch\"](function (e) {\n        //error occurred\n        if (e.response.status == 500) {\n          //back-end error, logout user from device anyways\n          localStorage.removeItem('token');\n          localStorage.removeItem('profile'); //redirect back to login\n\n          Router.push('/login');\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, \"REDIRECTING....\"));\n    }\n  }]);\n\n  return Logout;\n}(Component);\n\nexport default Logout;","map":{"version":3,"sources":["/home/cjason/prodev/minextjs/pages/logout.js"],"names":["React","Component","Router","AuthService","Layout","auth","Logout","props","logout","then","res","console","log","push","e","response","status","localStorage","removeItem"],"mappings":";;;;;;;;AAAA;;;;;;AAOA;AACA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,aAAnB,C,CAEA;;AACA,OAAOC,WAAP,MAAwB,qBAAxB;AAEA,OAAOC,MAAP,MAAmB,kCAAnB,C,CAEA;;AACA,IAAMC,IAAI,GAAG,IAAIF,WAAJ,CAAgB,uBAAhB,CAAb;;IAEMG,M;;;;;AACL,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA,+EACZA,KADY;AAElB;;;;wCAEoB;AACpB;AACAF,MAAAA,IAAI,CAACG,MAAL,GAAcC,IAAd,CAAoB,UAAAC,GAAG,EAAG;AACzBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,EADyB,CAGzB;;AACAR,QAAAA,MAAM,CAACW,IAAP,CAAY,GAAZ;AACA,OALD,WAKU,UAAAC,CAAC,EAAG;AACb;AACA,YAAGA,CAAC,CAACC,QAAF,CAAWC,MAAX,IAAqB,GAAxB,EAA4B;AAC3B;AACAC,UAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAD,UAAAA,YAAY,CAACC,UAAb,CAAwB,SAAxB,EAH2B,CAI3B;;AACAhB,UAAAA,MAAM,CAACW,IAAP,CAAY,QAAZ;AACA;AAED,OAfD;AAgBA;;;6BAEQ;AACR,aACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADA,CADA;AAKA;;;;EA/BmBZ,S;;AAkCrB,eAAeK,MAAf","sourcesContent":["/*\n * Login page\n * used for logging in\n * please refer to https://github.com/zeit/next.js/issues/153\n *\n */\n\n//react components\nimport React, {Component} from 'react'\nimport Router from 'next/router'\n\n//custom service\nimport AuthService from '../utils/authser.js'\n\nimport Layout from '../layouts/minimalist/border1.js'\n\n//configure AuthService onto localhost:1996\nconst auth = new AuthService('http://localhost:1996')\n\nclass Logout extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t}\n\n\tcomponentDidMount () {\n\t\t//logout the user\n\t\tauth.logout().then( res=> {\n\t\t\tconsole.log(res)\n\n\t\t\t//redirect to index page\n\t\t\tRouter.push('/')\n\t\t}).catch( e=> {\n\t\t\t//error occurred\n\t\t\tif(e.response.status == 500){\n\t\t\t\t//back-end error, logout user from device anyways\n\t\t\t\tlocalStorage.removeItem('token');\n\t\t\t\tlocalStorage.removeItem('profile');\n\t\t\t\t//redirect back to login\n\t\t\t\tRouter.push('/login')\n\t\t\t}\n\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t<div>\n\t\t<div>REDIRECTING....</div>\n\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Logout\n"]},"metadata":{},"sourceType":"module"}