{"ast":null,"code":"var _jsxFileName = \"/home/cjason/prodev/minextjs/pages/login.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\n/*\n * Login page\n * used for logging in\n * please refer to https://github.com/zeit/next.js/issues/153\n *\n */\n//react components\nimport React, { Component } from 'react';\nimport Router from 'next/router';\nimport Link from 'next/link'; //custom imports\n\nimport AuthService from '../utils/authser.js';\nimport Layout from '../layouts/minimalist/border1.js'; //configure AuthService onto localhost:1996\n\nconst auth = new AuthService('http://localhost:1996');\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    if (auth.loggedIn()) {\n      // redirect if you're already logged in\n      Router.push('/profile');\n    }\n  }\n\n  handleSubmit(e) {\n    e.preventDefault(); // yay uncontrolled forms!\n\n    auth.login(this.refs.email.value, this.refs.password.value).then(res => {\n      Router.push('/profile');\n    }).catch(e => {\n      //display login error\n      if (!e.response && e.response.status == 401) {\n        //unauthorized (wrong creds or invalid input)\n        //change the worm image\n        this.refs.worm.src = \"/icons/worm128-o.png\";\n        this.refs.status.innerHTML = \"Invalid credentials !\";\n      }\n    });\n  }\n\n  render() {\n    return __jsx(Layout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"jsx-2510539584\" + \" \" + \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, __jsx(\"img\", {\n      src: \"/icons/worm128.png\",\n      alt: \"worm128.png\",\n      ref: \"worm\",\n      className: \"jsx-2510539584\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }), __jsx(\"h1\", {\n      className: \"jsx-2510539584\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, \"Wormy\"), __jsx(\"form\", {\n      onSubmit: this.handleSubmit,\n      className: \"jsx-2510539584\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, __jsx(\"label\", {\n      htmlFor: \"email\",\n      className: \"jsx-2510539584\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Email Login\"), __jsx(\"input\", {\n      id: \"email\",\n      type: \"text\",\n      ref: \"email\",\n      className: \"jsx-2510539584\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }), __jsx(\"label\", {\n      htmlFor: \"password\",\n      className: \"jsx-2510539584\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"Password\"), __jsx(\"input\", {\n      id: \"password\",\n      type: \"password\",\n      ref: \"password\",\n      className: \"jsx-2510539584\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }), __jsx(\"input\", {\n      type: \"submit\",\n      value: \"Login\",\n      className: \"jsx-2510539584\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }), __jsx(\"br\", {\n      className: \"jsx-2510539584\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }), __jsx(\"label\", {\n      ref: \"status\",\n      style: {\n        color: '#ea3636',\n        textAlign: 'right'\n      },\n      className: \"jsx-2510539584\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }), __jsx(Link, {\n      href: \"/signup\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, __jsx(\"a\", {\n      className: \"jsx-2510539584\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Signup\")))), __jsx(_JSXStyle, {\n      id: \"2510539584\",\n      __self: this\n    }, \".login.jsx-2510539584{max-width:340px;margin:0 auto;padding:1rem;border:1px solid #ccc;border-radius:4px;}form.jsx-2510539584{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;}label.jsx-2510539584{font-weight:600;}input.jsx-2510539584{padding:8px;margin:0.3rem 0 1rem;border:1px solid #ccc;border-radius:4px;}.error.jsx-2510539584{margin:0.5rem 0 0;display:none;color:brown;}.error.show.jsx-2510539584{display:block;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2NqYXNvbi9wcm9kZXYvbWluZXh0anMvcGFnZXMvbG9naW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBd0VjLEFBR29CLEFBT0gsQUFJRyxBQUdKLEFBTU0sQUFLSixZQVZPLEVBV3JCLEVBekJjLEFBV2QsRUFTYSxZQW5CQSxDQW9CRCxFQU5VLFVBYkEsQUFvQnRCLFlBTmtCLFVBYkEsUUFjbEIsQ0FWaUIsU0FIakIsc0RBSUEiLCJmaWxlIjoiL2hvbWUvY2phc29uL3Byb2Rldi9taW5leHRqcy9wYWdlcy9sb2dpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBMb2dpbiBwYWdlXG4gKiB1c2VkIGZvciBsb2dnaW5nIGluXG4gKiBwbGVhc2UgcmVmZXIgdG8gaHR0cHM6Ly9naXRodWIuY29tL3plaXQvbmV4dC5qcy9pc3N1ZXMvMTUzXG4gKlxuICovXG5cbi8vcmVhY3QgY29tcG9uZW50c1xuaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCdcbmltcG9ydCBSb3V0ZXIgZnJvbSAnbmV4dC9yb3V0ZXInXG5pbXBvcnQgTGluayBmcm9tICduZXh0L2xpbmsnO1xuXG4vL2N1c3RvbSBpbXBvcnRzXG5pbXBvcnQgQXV0aFNlcnZpY2UgZnJvbSAnLi4vdXRpbHMvYXV0aHNlci5qcydcbmltcG9ydCBMYXlvdXQgZnJvbSAnLi4vbGF5b3V0cy9taW5pbWFsaXN0L2JvcmRlcjEuanMnXG5cbi8vY29uZmlndXJlIEF1dGhTZXJ2aWNlIG9udG8gbG9jYWxob3N0OjE5OTZcbmNvbnN0IGF1dGggPSBuZXcgQXV0aFNlcnZpY2UoJ2h0dHA6Ly9sb2NhbGhvc3Q6MTk5NicpXG5cbmNsYXNzIExvZ2luIGV4dGVuZHMgQ29tcG9uZW50IHtcblx0Y29uc3RydWN0b3IocHJvcHMpIHtcblx0XHRzdXBlcihwcm9wcylcblx0XHR0aGlzLmhhbmRsZVN1Ym1pdCA9IHRoaXMuaGFuZGxlU3VibWl0LmJpbmQodGhpcylcblx0fVxuXG5cdGNvbXBvbmVudERpZE1vdW50ICgpIHtcblx0XHRpZiAoYXV0aC5sb2dnZWRJbigpKSB7XG5cdFx0XHQvLyByZWRpcmVjdCBpZiB5b3UncmUgYWxyZWFkeSBsb2dnZWQgaW5cblx0XHRcdFJvdXRlci5wdXNoKCcvcHJvZmlsZScpXG5cdFx0fVxuXHR9XG5cblx0aGFuZGxlU3VibWl0IChlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpXG5cdFx0Ly8geWF5IHVuY29udHJvbGxlZCBmb3JtcyFcblx0XHRhdXRoLmxvZ2luKHRoaXMucmVmcy5lbWFpbC52YWx1ZSwgdGhpcy5yZWZzLnBhc3N3b3JkLnZhbHVlKVxuXHRcdC50aGVuKHJlcyA9PiB7XG5cdFx0XHRSb3V0ZXIucHVzaCgnL3Byb2ZpbGUnKVxuXHRcdH0pXG5cdFx0LmNhdGNoKGUgPT4ge1xuXHRcdFx0Ly9kaXNwbGF5IGxvZ2luIGVycm9yXG5cdFx0XHRpZighZS5yZXNwb25zZSAmJiBlLnJlc3BvbnNlLnN0YXR1cyA9PSA0MDEpe1xuXHRcdFx0XHQvL3VuYXV0aG9yaXplZCAod3JvbmcgY3JlZHMgb3IgaW52YWxpZCBpbnB1dClcblx0XHRcdFx0Ly9jaGFuZ2UgdGhlIHdvcm0gaW1hZ2Vcblx0XHRcdFx0dGhpcy5yZWZzLndvcm0uc3JjID0gXCIvaWNvbnMvd29ybTEyOC1vLnBuZ1wiXG5cdFx0XHRcdHRoaXMucmVmcy5zdGF0dXMuaW5uZXJIVE1MID0gXCJJbnZhbGlkIGNyZWRlbnRpYWxzICFcIlxuXHRcdFx0fVxuXHRcdH0pXG5cdH1cblxuXHRyZW5kZXIgKCkge1xuXHRcdHJldHVybiAoXG5cdFx0PExheW91dD5cblx0XHQ8ZGl2IGNsYXNzTmFtZT1cImxvZ2luXCI+XG5cdFx0PGltZyBzcmM9XCIvaWNvbnMvd29ybTEyOC5wbmdcIiBhbHQ9XCJ3b3JtMTI4LnBuZ1wiIHJlZj1cIndvcm1cIi8+XG5cdFx0PGgxPldvcm15PC9oMT5cblx0XHQ8Zm9ybSBvblN1Ym1pdD17dGhpcy5oYW5kbGVTdWJtaXR9PlxuXG5cdFx0PGxhYmVsIGh0bWxGb3I9J2VtYWlsJz5FbWFpbCBMb2dpbjwvbGFiZWw+XG5cdFx0PGlucHV0IGlkPVwiZW1haWxcIiB0eXBlPVwidGV4dFwiIHJlZj1cImVtYWlsXCIvPlxuXG5cdFx0PGxhYmVsIGh0bWxGb3I9J3Bhc3N3b3JkJz5QYXNzd29yZDwvbGFiZWw+XG5cdFx0PGlucHV0IGlkPVwicGFzc3dvcmRcIiB0eXBlPVwicGFzc3dvcmRcIiByZWY9XCJwYXNzd29yZFwiLz5cblxuXHRcdDxpbnB1dCB0eXBlPVwic3VibWl0XCIgdmFsdWU9XCJMb2dpblwiLz5cblxuXHRcdDxici8+XG5cdFx0PGxhYmVsIHJlZj1cInN0YXR1c1wiIHN0eWxlPXt7Y29sb3I6JyNlYTM2MzYnLCB0ZXh0QWxpZ246ICdyaWdodCd9fT48L2xhYmVsPlxuXG5cdFx0PExpbmsgaHJlZj1cIi9zaWdudXBcIj48YSA+U2lnbnVwPC9hPjwvTGluaz5cblx0XHQ8L2Zvcm0+XG5cdFx0PC9kaXY+XG5cdFx0PHN0eWxlIGpzeD57YFxuXHRcdFx0LmxvZ2luIHtcblx0XHRcdG1heC13aWR0aDogMzQwcHg7XG5cdFx0XHRtYXJnaW46IDAgYXV0bztcblx0XHRcdHBhZGRpbmc6IDFyZW07XG5cdFx0XHRib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuXHRcdFx0Ym9yZGVyLXJhZGl1czogNHB4O1xuXHRcdFx0fVxuXHRcdFx0Zm9ybSB7XG5cdFx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdFx0ZmxleC1mbG93OiBjb2x1bW47XG5cdFx0XHR9XG5cdFx0XHRsYWJlbCB7XG5cdFx0XHRmb250LXdlaWdodDogNjAwO1xuXHRcdFx0fVxuXHRcdFx0aW5wdXQge1xuXHRcdFx0cGFkZGluZzogOHB4O1xuXHRcdFx0bWFyZ2luOiAwLjNyZW0gMCAxcmVtO1xuXHRcdFx0Ym9yZGVyOiAxcHggc29saWQgI2NjYztcblx0XHRcdGJvcmRlci1yYWRpdXM6IDRweDtcblx0XHRcdH1cblx0XHRcdC5lcnJvciB7XG5cdFx0XHRtYXJnaW46IDAuNXJlbSAwIDA7XG5cdFx0XHRkaXNwbGF5OiBub25lO1xuXHRcdFx0Y29sb3I6IGJyb3duO1xuXHRcdFx0fVxuXHRcdFx0LmVycm9yLnNob3cge1xuXHRcdFx0ZGlzcGxheTogYmxvY2s7XG5cdFx0XHR9XG5cdFx0YH08L3N0eWxlPlxuXHRcdDwvTGF5b3V0PlxuXHRcdClcblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBMb2dpblxuIl19 */\\n/*@ sourceURL=/home/cjason/prodev/minextjs/pages/login.js */\"));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/cjason/prodev/minextjs/pages/login.js"],"names":["React","Component","Router","Link","AuthService","Layout","auth","Login","constructor","props","handleSubmit","bind","componentDidMount","loggedIn","push","e","preventDefault","login","refs","email","value","password","then","res","catch","response","status","worm","src","innerHTML","render","color","textAlign"],"mappings":"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","sourcesContent":["/*\n * Login page\n * used for logging in\n * please refer to https://github.com/zeit/next.js/issues/153\n *\n */\n\n//react components\nimport React, {Component} from 'react'\nimport Router from 'next/router'\nimport Link from 'next/link';\n\n//custom imports\nimport AuthService from '../utils/authser.js'\nimport Layout from '../layouts/minimalist/border1.js'\n\n//configure AuthService onto localhost:1996\nconst auth = new AuthService('http://localhost:1996')\n\nclass Login extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.handleSubmit = this.handleSubmit.bind(this)\n\t}\n\n\tcomponentDidMount () {\n\t\tif (auth.loggedIn()) {\n\t\t\t// redirect if you're already logged in\n\t\t\tRouter.push('/profile')\n\t\t}\n\t}\n\n\thandleSubmit (e) {\n\t\te.preventDefault()\n\t\t// yay uncontrolled forms!\n\t\tauth.login(this.refs.email.value, this.refs.password.value)\n\t\t.then(res => {\n\t\t\tRouter.push('/profile')\n\t\t})\n\t\t.catch(e => {\n\t\t\t//display login error\n\t\t\tif(!e.response && e.response.status == 401){\n\t\t\t\t//unauthorized (wrong creds or invalid input)\n\t\t\t\t//change the worm image\n\t\t\t\tthis.refs.worm.src = \"/icons/worm128-o.png\"\n\t\t\t\tthis.refs.status.innerHTML = \"Invalid credentials !\"\n\t\t\t}\n\t\t})\n\t}\n\n\trender () {\n\t\treturn (\n\t\t<Layout>\n\t\t<div className=\"login\">\n\t\t<img src=\"/icons/worm128.png\" alt=\"worm128.png\" ref=\"worm\"/>\n\t\t<h1>Wormy</h1>\n\t\t<form onSubmit={this.handleSubmit}>\n\n\t\t<label htmlFor='email'>Email Login</label>\n\t\t<input id=\"email\" type=\"text\" ref=\"email\"/>\n\n\t\t<label htmlFor='password'>Password</label>\n\t\t<input id=\"password\" type=\"password\" ref=\"password\"/>\n\n\t\t<input type=\"submit\" value=\"Login\"/>\n\n\t\t<br/>\n\t\t<label ref=\"status\" style={{color:'#ea3636', textAlign: 'right'}}></label>\n\n\t\t<Link href=\"/signup\"><a >Signup</a></Link>\n\t\t</form>\n\t\t</div>\n\t\t<style jsx>{`\n\t\t\t.login {\n\t\t\tmax-width: 340px;\n\t\t\tmargin: 0 auto;\n\t\t\tpadding: 1rem;\n\t\t\tborder: 1px solid #ccc;\n\t\t\tborder-radius: 4px;\n\t\t\t}\n\t\t\tform {\n\t\t\tdisplay: flex;\n\t\t\tflex-flow: column;\n\t\t\t}\n\t\t\tlabel {\n\t\t\tfont-weight: 600;\n\t\t\t}\n\t\t\tinput {\n\t\t\tpadding: 8px;\n\t\t\tmargin: 0.3rem 0 1rem;\n\t\t\tborder: 1px solid #ccc;\n\t\t\tborder-radius: 4px;\n\t\t\t}\n\t\t\t.error {\n\t\t\tmargin: 0.5rem 0 0;\n\t\t\tdisplay: none;\n\t\t\tcolor: brown;\n\t\t\t}\n\t\t\t.error.show {\n\t\t\tdisplay: block;\n\t\t\t}\n\t\t`}</style>\n\t\t</Layout>\n\t\t)\n\t}\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}