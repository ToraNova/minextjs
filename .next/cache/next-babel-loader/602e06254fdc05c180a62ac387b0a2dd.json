{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/cjason/prodev/minextjs/pages/logout.js\";\nvar __jsx = React.createElement;\n\n/*\n * Login page\n * used for logging in\n * please refer to https://github.com/zeit/next.js/issues/153\n *\n */\n//react components\nimport React, { Component } from 'react';\nimport Router from 'next/router'; //custom service\n\nimport AuthService from '../utils/authser.js';\nimport Layout from '../layouts/minimalist/border1.js'; //configure AuthService onto localhost:1996\n\nvar auth = new AuthService('http://localhost:1996');\n\nvar Logout =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Logout, _Component);\n\n  function Logout(props) {\n    _classCallCheck(this, Logout);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Logout).call(this, props));\n  }\n\n  _createClass(Logout, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //logout the user\n      auth.logout().then(function (res) {\n        //redirect to index page\n        Router.push('/');\n      })[\"catch\"](function (e) {\n        //error occurred\n        switch (e.response.status) {\n          case 401: //user not logged in. don't do anything\n\n          case 500:\n            //back-end error, logout user from device anyways\n            localStorage.removeItem('token');\n            localStorage.removeItem('profile'); //redirect back to login\n\n            Router.push('/login');\n            break;\n\n          default:\n            //unknown error do not logout first\n            //TODO: figure out what do properly do here\n            Router.push('/');\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, \"REDIRECTING....\"));\n    }\n  }]);\n\n  return Logout;\n}(Component);\n\nexport default Logout;","map":{"version":3,"sources":["/home/cjason/prodev/minextjs/pages/logout.js"],"names":["React","Component","Router","AuthService","Layout","auth","Logout","props","logout","then","res","push","e","response","status","localStorage","removeItem"],"mappings":";;;;;;;;AAAA;;;;;;AAOA;AACA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,aAAnB,C,CAEA;;AACA,OAAOC,WAAP,MAAwB,qBAAxB;AAEA,OAAOC,MAAP,MAAmB,kCAAnB,C,CAEA;;AACA,IAAMC,IAAI,GAAG,IAAIF,WAAJ,CAAgB,uBAAhB,CAAb;;IAEMG,M;;;;;AACL,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA,+EACZA,KADY;AAElB;;;;wCAEoB;AACpB;AACAF,MAAAA,IAAI,CAACG,MAAL,GAAcC,IAAd,CAAoB,UAAAC,GAAG,EAAG;AACzB;AACAR,QAAAA,MAAM,CAACS,IAAP,CAAY,GAAZ;AACA,OAHD,WAGU,UAAAC,CAAC,EAAG;AACb;AACA,gBAAQA,CAAC,CAACC,QAAF,CAAWC,MAAnB;AACC,eAAK,GAAL,CADD,CAEE;;AACD,eAAK,GAAL;AACC;AACAC,YAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAD,YAAAA,YAAY,CAACC,UAAb,CAAwB,SAAxB,EAHD,CAIC;;AACAd,YAAAA,MAAM,CAACS,IAAP,CAAY,QAAZ;AACA;;AACD;AACC;AACA;AACAT,YAAAA,MAAM,CAACS,IAAP,CAAY,GAAZ;AAbF;AAgBA,OArBD;AAsBA;;;6BAEQ;AACR,aACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADA,CADA;AAKA;;;;EArCmBV,S;;AAwCrB,eAAeK,MAAf","sourcesContent":["/*\n * Login page\n * used for logging in\n * please refer to https://github.com/zeit/next.js/issues/153\n *\n */\n\n//react components\nimport React, {Component} from 'react'\nimport Router from 'next/router'\n\n//custom service\nimport AuthService from '../utils/authser.js'\n\nimport Layout from '../layouts/minimalist/border1.js'\n\n//configure AuthService onto localhost:1996\nconst auth = new AuthService('http://localhost:1996')\n\nclass Logout extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t}\n\n\tcomponentDidMount () {\n\t\t//logout the user\n\t\tauth.logout().then( res=> {\n\t\t\t//redirect to index page\n\t\t\tRouter.push('/')\n\t\t}).catch( e=> {\n\t\t\t//error occurred\n\t\t\tswitch( e.response.status ){\n\t\t\t\tcase 401:\n\t\t\t\t\t//user not logged in. don't do anything\n\t\t\t\tcase 500:\n\t\t\t\t\t//back-end error, logout user from device anyways\n\t\t\t\t\tlocalStorage.removeItem('token');\n\t\t\t\t\tlocalStorage.removeItem('profile');\n\t\t\t\t\t//redirect back to login\n\t\t\t\t\tRouter.push('/login')\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t//unknown error do not logout first\n\t\t\t\t\t//TODO: figure out what do properly do here\n\t\t\t\t\tRouter.push('/')\n\t\t\t}\n\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t<div>\n\t\t<div>REDIRECTING....</div>\n\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Logout\n"]},"metadata":{},"sourceType":"module"}